<!doctype html>
<html lang="en" class="h-full">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Pipeline Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        darkMode: "class",
        theme: {
          extend: {
            colors: {
              // Accessible color system
              pipeline: {
                pending: "#94a3b8", // slate-400
                running: "#3b82f6", // blue-500
                complete: "#10b981", // emerald-500
                error: "#ef4444", // red-500
                refining: "#f59e0b", // amber-500
              },
            },
            animation: {
              "pulse-subtle": "pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite",
              "slide-in": "slideIn 0.3s ease-out",
            },
            keyframes: {
              slideIn: {
                "0%": { transform: "translateX(-10px)", opacity: "0" },
                "100%": { transform: "translateX(0)", opacity: "1" },
              },
            },
          },
        },
      };
    </script>
  </head>
  <body
    class="h-full bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-gray-100 font-sans antialiased"
  >
    <!-- Control Bar - Fixed Height -->
    <header
      class="h-14 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 flex items-center px-4 shadow-sm"
    >
      <div class="flex-1 flex items-center space-x-4">
        <!-- Pipeline Selector -->
        <select
          class="text-sm bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded px-3 py-1.5 focus:ring-2 focus:ring-blue-500 focus:border-transparent"
        >
          <option>marketing-campaign-v3</option>
          <option>data-analysis-pipeline</option>
          <option>content-generation</option>
        </select>

        <!-- Quick Actions -->
        <div class="flex items-center space-x-2">
          <button
            class="p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition-colors"
            title="Submit Job (⌘N)"
          >
            <svg
              class="w-4 h-4"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M12 4v16m8-8H4"
              />
            </svg>
          </button>
          <button
            class="p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition-colors"
            title="Stop Pipeline (⌘S)"
          >
            <svg
              class="w-4 h-4"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M6 18L18 6M6 6l12 12"
              />
            </svg>
          </button>
          <button
            class="p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition-colors"
            title="Refresh (⌘R)"
          >
            <svg
              class="w-4 h-4"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"
              />
            </svg>
          </button>
        </div>

        <!-- Environment Indicators -->
        <div class="flex items-center space-x-3 ml-6 text-xs">
          <span class="flex items-center">
            <span class="w-2 h-2 bg-green-500 rounded-full mr-1.5"></span>
            <span class="text-gray-600 dark:text-gray-400">OpenAI</span>
          </span>
          <span class="flex items-center">
            <span class="w-2 h-2 bg-green-500 rounded-full mr-1.5"></span>
            <span class="text-gray-600 dark:text-gray-400">DeepSeek</span>
          </span>
          <span class="flex items-center">
            <span class="w-2 h-2 bg-gray-300 rounded-full mr-1.5"></span>
            <span class="text-gray-600 dark:text-gray-400">Anthropic</span>
          </span>
        </div>
      </div>

      <!-- Status Indicator -->
      <div class="flex items-center space-x-3">
        <!-- Cost Ticker -->
        <div class="text-sm text-gray-600 dark:text-gray-400">
          <span class="font-mono">$12.34</span>
          <span class="text-xs">today</span>
        </div>

        <!-- Connection Status -->
        <div class="flex items-center">
          <span
            class="w-2 h-2 bg-green-500 rounded-full animate-pulse-subtle"
          ></span>
          <span class="ml-2 text-xs text-gray-600 dark:text-gray-400"
            >Connected</span
          >
        </div>

        <!-- Theme Toggle -->
        <button
          class="p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition-colors"
        >
          <svg
            class="w-4 h-4"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"
            />
          </svg>
        </button>
      </div>
    </header>

    <!-- Main Content Area -->
    <div class="h-[calc(100vh-3.5rem)] flex flex-col">
      <!-- Three Column Layout -->
      <div class="flex-1 flex overflow-hidden">
        <!-- Left Column: Queue & Input -->
        <aside
          class="w-64 bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 flex flex-col"
        >
          <!-- Queue Header -->
          <div class="px-4 py-3 border-b border-gray-200 dark:border-gray-700">
            <h2 class="text-sm font-semibold text-gray-700 dark:text-gray-300">
              Queue
            </h2>
            <div class="mt-1 flex items-center space-x-2 text-xs text-gray-500">
              <span>3 pending</span>
              <span>•</span>
              <span>2 running</span>
            </div>
          </div>

          <!-- Drop Zone -->
          <div class="p-4">
            <div
              class="border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-6 text-center hover:border-blue-400 dark:hover:border-blue-500 transition-colors cursor-pointer"
            >
              <svg
                class="w-8 h-8 mx-auto text-gray-400 mb-2"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"
                />
              </svg>
              <p class="text-xs text-gray-600 dark:text-gray-400">
                Drop seed.json
              </p>
            </div>
          </div>

          <!-- Queue Items -->
          <div class="flex-1 overflow-y-auto px-4 space-y-2">
            <!-- Pending Item -->
            <div
              class="bg-gray-50 dark:bg-gray-700 rounded p-3 text-sm animate-slide-in"
            >
              <div class="flex items-center justify-between mb-1">
                <span class="font-medium text-gray-700 dark:text-gray-300"
                  >analysis-001</span
                >
                <span class="w-2 h-2 bg-pipeline-pending rounded-full"></span>
              </div>
              <div class="text-xs text-gray-500 dark:text-gray-400">
                Pending • ~2 min wait
              </div>
            </div>

            <!-- Running Item -->
            <div
              class="bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded p-3 text-sm"
            >
              <div class="flex items-center justify-between mb-1">
                <span class="font-medium text-gray-700 dark:text-gray-300"
                  >report-gen-42</span
                >
                <span
                  class="w-2 h-2 bg-pipeline-running rounded-full animate-pulse"
                ></span>
              </div>
              <div class="text-xs text-gray-500 dark:text-gray-400">
                Running • Task 2/5
              </div>
              <!-- Mini Progress Bar -->
              <div
                class="mt-2 h-1 bg-gray-200 dark:bg-gray-600 rounded-full overflow-hidden"
              >
                <div
                  class="h-full bg-blue-500 rounded-full transition-all duration-300"
                  style="width: 40%"
                ></div>
              </div>
            </div>
          </div>
        </aside>

        <!-- Center Column: Active Pipeline -->
        <main class="flex-1 bg-gray-50 dark:bg-gray-900 flex flex-col min-w-0">
          <!-- Pipeline Header -->
          <div
            class="bg-white dark:bg-gray-800 px-6 py-4 border-b border-gray-200 dark:border-gray-700"
          >
            <div class="flex items-center justify-between">
              <div>
                <h1 class="text-lg font-semibold">report-gen-42</h1>
                <div
                  class="mt-1 flex items-center space-x-3 text-sm text-gray-600 dark:text-gray-400"
                >
                  <span>Started 3m ago</span>
                  <span>•</span>
                  <span>Task 2 of 5</span>
                  <span>•</span>
                  <span class="text-amber-500">Refining (1/2)</span>
                </div>
              </div>
              <button
                class="px-3 py-1.5 bg-red-500 hover:bg-red-600 text-white text-sm rounded transition-colors"
              >
                Stop Pipeline
              </button>
            </div>
          </div>

          <!-- Task Pipeline Visualization -->
          <div class="flex-1 p-6 overflow-auto">
            <!-- Task Cards in Horizontal Flow -->
            <div class="flex space-x-4 mb-6 min-w-max">
              <!-- Completed Task -->
              <div
                class="w-48 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4"
              >
                <div class="flex items-center justify-between mb-2">
                  <span class="text-sm font-medium">ingestion</span>
                  <svg
                    class="w-4 h-4 text-green-500"
                    fill="currentColor"
                    viewBox="0 0 20 20"
                  >
                    <path
                      fill-rule="evenodd"
                      d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"
                      clip-rule="evenodd"
                    />
                  </svg>
                </div>
                <div class="space-y-1 text-xs text-gray-600 dark:text-gray-400">
                  <div class="flex justify-between">
                    <span>Duration:</span>
                    <span class="font-mono">1.2s</span>
                  </div>
                  <div class="flex justify-between">
                    <span>Tokens:</span>
                    <span class="font-mono">1,234</span>
                  </div>
                  <div class="flex justify-between">
                    <span>Cost:</span>
                    <span class="font-mono">$0.02</span>
                  </div>
                </div>
              </div>

              <!-- Active Task with Stage Progress -->
              <div
                class="w-48 bg-blue-50 dark:bg-blue-900/20 rounded-lg border-2 border-blue-400 dark:border-blue-600 p-4 shadow-lg"
              >
                <div class="flex items-center justify-between mb-3">
                  <span class="text-sm font-medium">analysis</span>
                  <div
                    class="w-4 h-4 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"
                  ></div>
                </div>

                <!-- 11-Stage Progress -->
                <div class="space-y-1">
                  <div class="flex items-center text-xs">
                    <span class="w-20 text-gray-600 dark:text-gray-400"
                      >preProcess</span
                    >
                    <div
                      class="flex-1 ml-2 h-1 bg-gray-200 dark:bg-gray-600 rounded"
                    >
                      <div
                        class="h-full bg-green-500 rounded"
                        style="width: 100%"
                      ></div>
                    </div>
                  </div>
                  <div class="flex items-center text-xs">
                    <span class="w-20 text-gray-600 dark:text-gray-400"
                      >inference</span
                    >
                    <div
                      class="flex-1 ml-2 h-1 bg-gray-200 dark:bg-gray-600 rounded"
                    >
                      <div
                        class="h-full bg-green-500 rounded"
                        style="width: 100%"
                      ></div>
                    </div>
                  </div>
                  <div class="flex items-center text-xs">
                    <span class="w-20 text-gray-600 dark:text-gray-400"
                      >validate</span
                    >
                    <div
                      class="flex-1 ml-2 h-1 bg-gray-200 dark:bg-gray-600 rounded"
                    >
                      <div
                        class="h-full bg-red-500 rounded"
                        style="width: 100%"
                      ></div>
                    </div>
                  </div>
                  <div class="flex items-center text-xs">
                    <span class="w-20 font-semibold text-amber-600"
                      >refine</span
                    >
                    <div
                      class="flex-1 ml-2 h-1 bg-gray-200 dark:bg-gray-600 rounded"
                    >
                      <div
                        class="h-full bg-amber-500 rounded animate-pulse"
                        style="width: 60%"
                      ></div>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Pending Tasks -->
              <div
                class="w-48 bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-600 border-dashed p-4 opacity-50"
              >
                <span class="text-sm font-medium text-gray-500">synthesis</span>
              </div>
            </div>

            <!-- Live Log Stream -->
            <div
              class="bg-gray-900 rounded-lg p-4 font-mono text-xs text-green-400 h-48 overflow-y-auto"
            >
              <div>[2024-01-20 10:23:45] Starting task: analysis</div>
              <div>[2024-01-20 10:23:45] Stage: preProcessing - complete</div>
              <div>[2024-01-20 10:23:46] Stage: inference - calling GPT-4</div>
              <div>
                [2024-01-20 10:23:48] Stage: inference - tokens: 1523, cost:
                $0.03
              </div>
              <div>[2024-01-20 10:23:48] Stage: validateStructure - FAILED</div>
              <div>
                [2024-01-20 10:23:49] Stage: critique - generating improvements
              </div>
              <div class="text-amber-400">
                [2024-01-20 10:23:50] Stage: refine - attempt 1/2
              </div>
              <div class="animate-pulse">█</div>
            </div>
          </div>
        </main>

        <!-- Right Column: Performance & Outputs -->
        <aside
          class="w-96 bg-white dark:bg-gray-800 border-l border-gray-200 dark:border-gray-700 flex flex-col"
        >
          <!-- Performance Metrics -->
          <div class="px-4 py-3 border-b border-gray-200 dark:border-gray-700">
            <h2 class="text-sm font-semibold text-gray-700 dark:text-gray-300">
              Performance
            </h2>
          </div>

          <div class="p-4 space-y-4">
            <!-- Mini Metrics Grid -->
            <div class="grid grid-cols-2 gap-3">
              <div class="bg-gray-50 dark:bg-gray-700 rounded p-3">
                <div class="text-xs text-gray-500 dark:text-gray-400 mb-1">
                  Success Rate
                </div>
                <div class="text-xl font-semibold">87%</div>
                <div class="mt-1 h-12">
                  <!-- Inline Sparkline SVG -->
                  <svg class="w-full h-full" viewBox="0 0 100 40">
                    <polyline
                      points="0,35 10,30 20,32 30,28 40,25 50,27 60,20 70,22 80,18 90,15 100,10"
                      stroke="currentColor"
                      stroke-width="2"
                      fill="none"
                      class="text-green-500"
                    />
                  </svg>
                </div>
              </div>

              <div class="bg-gray-50 dark:bg-gray-700 rounded p-3">
                <div class="text-xs text-gray-500 dark:text-gray-400 mb-1">
                  Avg Duration
                </div>
                <div class="text-xl font-semibold">2m 34s</div>
                <div class="mt-1 h-12">
                  <svg class="w-full h-full" viewBox="0 0 100 40">
                    <polyline
                      points="0,20 10,22 20,18 30,25 40,20 50,23 60,19 70,21 80,20 90,18 100,20"
                      stroke="currentColor"
                      stroke-width="2"
                      fill="none"
                      class="text-blue-500"
                    />
                  </svg>
                </div>
              </div>

              <div class="bg-gray-50 dark:bg-gray-700 rounded p-3">
                <div class="text-xs text-gray-500 dark:text-gray-400 mb-1">
                  Total Cost
                </div>
                <div class="text-xl font-semibold">$4.21</div>
                <div class="text-xs text-gray-500 mt-1">
                  ↑ 12% from yesterday
                </div>
              </div>

              <div class="bg-gray-50 dark:bg-gray-700 rounded p-3">
                <div class="text-xs text-gray-500 dark:text-gray-400 mb-1">
                  Refinements
                </div>
                <div class="text-xl font-semibold">1.3</div>
                <div class="text-xs text-gray-500 mt-1">avg per pipeline</div>
              </div>
            </div>

            <!-- Output Viewer -->
            <div class="border-t border-gray-200 dark:border-gray-700 pt-4">
              <h3
                class="text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3"
              >
                Latest Output
              </h3>
              <div
                class="bg-gray-50 dark:bg-gray-700 rounded p-3 max-h-64 overflow-y-auto"
              >
                <pre
                  class="text-xs text-gray-600 dark:text-gray-300 font-mono whitespace-pre-wrap"
                >
{
  "task": "ingestion",
  "status": "complete",
  "output": {
    "data": {
      "source": "user_input.csv",
      "rows": 1523,
      "columns": 12
    }
  },
  "metrics": {
    "duration": 1.2,
    "tokens": 1234,
    "cost": 0.02
  }
}</pre
                >
              </div>
            </div>

            <!-- Quick Actions -->
            <div class="flex space-x-2">
              <button
                class="flex-1 px-3 py-2 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded text-sm transition-colors"
              >
                Export Results
              </button>
              <button
                class="flex-1 px-3 py-2 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded text-sm transition-colors"
              >
                View Logs
              </button>
            </div>
          </div>
        </aside>
      </div>

      <!-- Context Flow Strip -->
      <div
        class="h-20 bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 px-6 py-3"
      >
        <div class="flex items-center h-full space-x-2 overflow-x-auto">
          <!-- Context Flow Visualization -->
          <div class="flex items-center space-x-1">
            <div
              class="px-2 py-1 bg-blue-100 dark:bg-blue-900/30 rounded text-xs whitespace-nowrap"
            >
              <span class="font-medium">seed.json</span>
              <span class="text-gray-500 ml-1">(2.1KB)</span>
            </div>
            <svg
              class="w-4 h-4 text-gray-400"
              fill="currentColor"
              viewBox="0 0 20 20"
            >
              <path
                fill-rule="evenodd"
                d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z"
                clip-rule="evenodd"
              />
            </svg>
            <div
              class="px-2 py-1 bg-green-100 dark:bg-green-900/30 rounded text-xs whitespace-nowrap"
            >
              <span class="font-medium">ingestion.output</span>
              <span class="text-gray-500 ml-1">(18KB)</span>
            </div>
            <svg
              class="w-4 h-4 text-gray-400"
              fill="currentColor"
              viewBox="0 0 20 20"
            >
              <path
                fill-rule="evenodd"
                d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z"
                clip-rule="evenodd"
              />
            </svg>
            <div
              class="px-2 py-1 bg-amber-100 dark:bg-amber-900/30 rounded text-xs whitespace-nowrap animate-pulse"
            >
              <span class="font-medium">analysis.refining</span>
              <span class="text-gray-500 ml-1">(3.2KB • 1,847 tokens)</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Keyboard Shortcuts Toast -->
    <div
      class="fixed bottom-4 right-4 bg-gray-900 text-white px-4 py-3 rounded-lg shadow-lg text-xs hidden"
      id="shortcuts"
    >
      <div class="font-semibold mb-2">Keyboard Shortcuts</div>
      <div class="space-y-1 text-gray-300">
        <div>⌘N - New Pipeline</div>
        <div>⌘S - Stop Current</div>
        <div>⌘R - Refresh</div>
        <div>⌘K - Search</div>
      </div>
    </div>
  </body>
</html>
